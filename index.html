<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Osama Meter</title>

<style>
:root{
  --bg:#000;
  --white:#f5f7ff;
  --gray:#9aa3b2;
  --red:#ff2a4f;
}

*{box-sizing:border-box}
html,body{height:100%;margin:0}

body{
  background:#000;
  color:var(--white);
  font-family:system-ui,Segoe UI,Roboto,Arial;
  display:flex;
  justify-content:center;
  align-items:center;
}

/* ===== MAIN HUD ===== */
.hud{
  width:100%;
  max-width:420px;
  height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  position:relative;
}

/* ===== TITLE ===== */
.header{
  position:absolute;
  top:40px;
  text-align:center;
}
.header h1{
  font-size:18px;
  margin:0;
  font-weight:700;
}
.header p{
  margin:4px 0 0;
  color:var(--gray);
  font-size:14px;
}

/* ===== GAUGE ===== */
.gauge{
  position:relative;
  width:300px;
  height:300px;
}

/* Arc */
.arc{
  position:absolute;
  inset:0;
  border-radius:50%;
  background:
    conic-gradient(
      from 225deg,
      #fff 0deg 180deg,
      var(--red) 180deg 270deg,
      transparent 270deg
    );
  mask:radial-gradient(circle,transparent 68%,black 69%);
}

/* Segments */
.arc::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius:50%;
  background:
    repeating-conic-gradient(
      from 225deg,
      transparent 0deg 5deg,
      black 5deg 8deg
    );
  mask:radial-gradient(circle,transparent 68%,black 69%);
}

/* ===== CENTER READOUT ===== */
.center{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
}

.speed{
  font-size:96px;
  font-weight:900;
  line-height:1;
}

.unit{
  font-size:16px;
  letter-spacing:2px;
  color:var(--gray);
}

.gear-label{
  margin-top:10px;
  font-size:14px;
  color:var(--gray);
}

.gear{
  font-size:36px;
  color:var(--red);
  font-weight:800;
}

/* ===== BATTERY ===== */
.battery{
  position:absolute;
  right:20px;
  height:120px;
  width:16px;
  border:2px solid #fff;
  padding:2px;
}
.battery-level{
  width:100%;
  background:#fff;
  height:50%;
}

/* ===== FOOTER ===== */
.footer{
  position:absolute;
  bottom:30px;
  color:var(--gray);
  font-size:13px;
}
</style>
</head>

<body>

<div class="hud">

  <div class="header">
    <h1>Osama Meter</h1>
    <p>دراجة عبد الحليم</p>
  </div>

  <div class="gauge">
    <div class="arc"></div>

    <div class="center">
      <div class="speed" id="speed">0</div>
      <div class="unit">KM/H</div>
      <div class="gear-label">GEAR</div>
      <div class="gear" id="gear">1</div>
    </div>
  </div>

  <div class="battery">
    <div class="battery-level" id="battery"></div>
  </div>

  <div class="footer">
    GPS ACTIVE
  </div>

</div>

<script>
/* ===== SPEED + GEAR ===== */
let ema=0;
const EMA=0.25;

function gearFromSpeed(v){
  if(v<=10) return 1;
  if(v<=15) return 2;
  if(v<=20) return 3;
  if(v<=25) return 4;
  return 5;
}

navigator.geolocation.watchPosition(p=>{
  let kmh=p.coords.speed!=null ? p.coords.speed*3.6 : 0;
  ema=EMA*kmh+(1-EMA)*ema;

  document.getElementById("speed").textContent=Math.round(ema);
  document.getElementById("gear").textContent=gearFromSpeed(ema);
},{},{enableHighAccuracy:true});

/* ===== BATTERY ===== */
if(navigator.getBattery){
  navigator.getBattery().then(b=>{
    function update(){
      document.getElementById("battery").style.height=
        (b.level*100)+"%";
    }
    update();
    b.addEventListener("levelchange",update);
  });
}
</script>

</body>
</html>
